<!DOCTYPE html>
<html>
 <head>
<title>Menu Ingreso</title>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. -->
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1,                                                                                                               width=device-width, height=device-height, target-densitydpi=device-dpi" />
                               <!--**********************************************Estilos**********************************************-->
 
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
<link rel="stylesheet" type="text/css" href="css/theme-classic.css">                      
 <link rel="stylesheet" type="text/css" href="css/jqm-datebox-1.4.5.css">
  <link rel="stylesheet" href="stylesheets/globals.css">
  <link rel="stylesheet" type="text/css" href="css/mediaquery.css">
<style type="text/css">
  p {font-size: 10px;
  text-align:center;}
  
  #logo_image {
  text-align: center;
  margin-left:0 auto;
  margin-right:0 auto;
  
  
  }
  

  
</style>
    
</head>

 		<script src="cordova.js"></script>

        
        
  
		</script>
<!--**********************************************Body***********************************************-->
 <body>
    <div data-role="page" class="ui-responsive-panel" id="panel-responsive-page1" data-cache="false" data-theme="c">
           <br>
            <br>
            
          <div data-role="header" data-theme="a" class= "ui-header ui-bar-a ui-header-fixed slidedown" data-fullscreen="true">
            <h1>Ingreso Ruta</h1>
            <a href="#nav-panel" data-icon="bars" data-iconpos="notext" data-ajax="false">Menu</a>
         
            </div><!-- /header -->
          
          
          <div role="main" class="ui-content"><!--content -->
            <div id="logo_image"><img src="img/logo.png"  alt="Image Header"></div>
            
   <!--*************************Carga de rango de Fechas************************************************-->
           <div class="ui-corner-all custom-corners">
              <div class="ui-bar ui-bar-a">
                <h3>Selecione Rango de Fechas</h3>
              </div>
             <div class="ui-body ui-body-c">
             
             <form   action="" type="post" id="formularioFecha" data-ajax="false">
                  <ul data-role="listview" data-inset="true">
                    <li data-role="list-divider" data-theme="d"> Iniciar fechas en:</li>
                  </ul>
                 <input type="hidden" id="doAction"  name="doAction" value="LAYOUT.RESUMEN.Table">
			

                  <label for="FINI">De:</label>
                 <input type="text" name="FINI" id="datepickerDe"  data-role="datebox" data-options='{"mode":"datebox", 
                  "dateFormat": "mm-dd-YYYY"}'  data-clear-btn="true"  data-ajax="false">
                  

                <label for="FFIN">Hasta:</label>
                 <input type="text" name="FFIN" id="datepickerHasta" data-role="datebox" data-options='{"mode":"datebox",  "dateFormat":"mm-dd-YYYY"}'  data-clear-btn="true"  data-ajax="false">
                  <br>
                  <br>
             
        
                  <a href= "#" class="ui-btn ui-btn-a ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-ajax="false" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true" id="Enviar" >Generar Consulta</a>
                </form> 
                  
                <br>
                <br>
                <br>
              </div>
            </div>
            <br>
            <!--***************************Carga de Las tablas y grafica************************************-->
            
            <div class="ui-corner-all custom-corners">
              <div class="ui-bar ui-bar-a">
                <h3>Reportes</h3>
              </div>
              <br>
              <br>
              <div class="ui-body ui-body-c" data-ajax="false">
                <div id="tabla"></div> 
                <div id="tabla2"></div>  
                <div id="tabla3"></div>             
              </div>
            </div>
          </div>
          <!-- /content --> 
          
          <!--***************************************************Panel menu**************************************-->
          
        <div data-role="panel" data-display="push" data-theme="c" id="nav-panel">
  <ul data-role="listview">
      <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li>
         <div class="ui-corner-all custom-corners">
           <div class="ui-bar ui-bar-a">
                 <h3>Reportes</h3>
                </div>
                <div class="ui-body ui-body-b">
                  <form >
                 <a href="menu.html" data-ajax="false" class="ui-btn ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true">Inicio</a> 
                     <a href="menuEstadisticasRuta.html" data-ajax="false" class="ui-btn ui-btn-d ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true">Ruta</a>
                 <a href="menuEstadisticasTransbordador.html" data-ajax="false" class="ui-btn ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true">Transbordador</a> 
                 <a href="menuEstadisticasCrucero.html" data-ajax="false" class="ui-btn ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true">Cruceros</a>
                  </form>
                </div>
              </div>
              <br>
              <div class="ui-corner-all custom-corners">
              <div class="ui-bar ui-bar-a">
                <h3>Ingreso</h3>
              </div>
              <div class="ui-body ui-body-b">
                <form>
                 
                  <a href="menuIngresosTransbordador.html" class="ui-btn ui-icon-carat-r ui-btn-icon-right show-page-loading-msg" data-ajax="false" data-textonly="false" data-textvisible="true" data-msgtext="" data-inline="true">Transbordador</a> 
                </form>
              </div>
              <br>
              
              <div class="ui-corner-all custom-corners">
              <div class="ui-bar ui-bar-a">
                <h1>Log Out</h1>
              </div>
                <div class="ui-body ui-body-b">
                <form data-ajax="false">
           
   <a href="#" class="ui-btn ui-btn-c ui-icon-user ui-btn-icon-left" id="nameuser" data-ajax="false" >Username:</a>

    <div class="ui-block-a"><a href="#"  data-textonly="false" data-ajax="false" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-mini ">Cancel</a></div>
    <div class="ui-block-b"><a href="#popupDialog" data-rel="popup" class="ui-btn ui-shadow ui-corner-all ui-btn-a ui-mini " data-position-to="window" data-transition="pop" class="ui-btn ui-shadow ui-corner-all ui-btn-a ui-mini">logout</a></div>
    <div data-role="popup" id="popupDialog" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
    
    <div role="main" class="ui-content">
        <h3 class="ui-title">Desea cerrar sesion?</h3>
    <p>Administración Portuaria de Quintana Roo, Puertos de Quintana Roo.</p>
        <a href="#"  class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b " data-rel="back">Cancel</a>
        <a href="#" id="loguot" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b " data-rel="back" data-transition="flow">logout</a>
    </div>
</div>


                </form>
              </div>
            </ul>
          </div>
          
                    
          <!-- /panel --> 
          
          <!--******************************************************************************Panel menu****************************************************************-->
          
    <div data-role="footer" data-theme="a" data-position="fixed">
            <p>Copyright © 2015  APIQROO.</p> 
     </div>
          <!-- /footer --> 
</div>
        <!-- /page --> 
 
        <!--**********************************************JavaScript***********************************************--> 
 
<script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js" type="text/javascript"><\/script>')</script> 
<script type="text/javascript"  src="js/jquery-responsiveTables.js"></script> 
<script src="highcharts/js/highcharts.js"></script> 
<script src="highcharts/js/modules/exporting.js"></script>
<script src="js/jquery.mobile-git.js"></script> 
<script src="js/jQuery-Mobile-DateBox.js"></script> 
<script src="js/json2.js"></script>
<script src="js/jstorage.js"></script>



        
        <!--**********************************************************************--> 
 

    
<!--**************************Extraccion de datos desde el servidor***************************************--> 
  
  <script type="text/javascript">     
  
  /*
    Fecha              :    18/07/2015
	
    Elaborado por      :    Falcon Tzec Pablo Cesar 
	
	Parametros         :	Fecha inicial, Doaction, 
	
    Tipo de Retorno    :	Retorno de un html.
			
  	Descripcion        :    Funcion para realizar peticiones atra 
                            vez de funciones ajax, el cual realizara la peticion 
                            para poder generar  la informacion solicitada(tablas ; graficas)
    
   */
 //Capturamos el evento click sobre el boton con el id Eviar               
 $(document).on('click','#Enviar',function() {  
                 //Envio atra vez de la funcion ajax por metido del metod Get  
           $.ajax({ 
                    type: "get", 
                    url  : 'http://estadistica.apiqroo.com.mx/apis/ing/ruta/',
                    async        : true,
                    crossDomain  : true,
					//Permite manter un solo canal atravez del servidor  
                    xhrFields: {
                        withCredentials: true
                   },
				  		 beforeSend: function() {
							
					//Esta función de devolución de llamada se 
					//activará antes de los datos se envían
							$.mobile.loading( "show", {
							text: "Cargando..",
							textVisible: "textonly",
								theme: "a",
								})
						 },
				    
						   	 data:$('#formularioFecha').serialize(),
				        
                    success: function(resp){ 
			//Lugar donde se mostrara el contenido que regresa el servidor 
                        $('#tabla').html(resp);
                        $('table.responsive').responsiveTables();
						$(window).trigger('rezise');
                //funcion para recorer la tabla sacar el campo seleccionado                      
                        $( ".npuerto" ).each(function(i){//uno

                              });//uno
                    } ,
					  //Esconde el icono de Cargando
						complete : function(){
						$.mobile.loading( "hide" );
                }
        }); 
});
 
 
    </script> 
    
    
    
    
<script type="text/javascript">
  
/*
    Fecha              :    18/07/2015
	
    Elaborado por      :    Falcon Tzec Pablo Cesar 
	
	Parametros         :	Fecha inicial, Doaction, 
	
    Tipo de Retorno    :	Retorno de un html.
			
  	Descripcion        :    Funcion para realizar peticiones atra 
                            vez de funciones ajax, el cual realizara la peticion 
                            para poder generar  la informacion sobre las puerto
    
*/

//Capturamos el evento click sobre el puerto seleccionado 
 $(document).on('click','.npuerto',function() {    
     //Envio atra vez de la funcion ajax por metido del metod Get       
           $.ajax({ 
                    type: "get", 
                    url  : 'http://estadistica.apiqroo.com.mx/apis/ing/ruta/',
                    async        : true,
					//Permite manter un solo canal atravez del servidor
                    crossDomain  : true,
                    xhrFields: {
                        withCredentials: true
                   },
				   beforeSend: function() { 
	//Esta función de devolución de llamada se activará antes de los datos se envían		
							text: "Cargando...",
							textVisible: "textonly",
							theme: "a",
							})
							 },
	//Esta función de devolución de llamada se activará antes de los datos se envía
				   	  data: {
                          FFIN:$(datepickerDe).val(),
                          FINI: $(datepickerHasta).val() ,
						  	   PUERTO: $(this).attr('puerto'),
                          doAction:"LAYOUT.RESUMEN.PUERTO.Table"
                           },
                       success: function(resp){ 
                        $('#tabla2').html(resp);
                         $('table2.responsive').responsiveTables();
                        $(window).trigger('rezise');
						//funcion para recorer la tabla sacar el campo seleccionado
                        $( "nnaviera" ).each(function(i){//uno
                                  
                          

                              });//uno
           		 } ,
            complete : function(){
            $.mobile.loading( "hide" );

                }
        }); 
        });


</script>


<script type="text/javascript">
  
/*
    Fecha              :    18/07/2015
	
    Elaborado por      :    Falcon Tzec Pablo Cesar 
	
	Parametros         :	Fecha inicial, Doaction, 
	
    Tipo de Retorno    :	Retorno de un html.
			
  	Descripcion        :    Funcion para realizar peticiones atra 
                            vez de funciones ajax, el cual realizara la peticion 
                            para poder generar  la informacion sobre las navieras 
*/

//Capturamos el evento click sobre la naviera seleccionada
 $(document).on('click','.nnaviera',function() {     
      
                 	   //Envio atra vez de la funcion ajax por metido del metod Get  
			
           $.ajax({ 
                    type: "get", 
                    url  : 'http://estadistica.apiqroo.com.mx/apis/ing/ruta/',
                    async        : true,
                    crossDomain  : true,
                    xhrFields: {
                        withCredentials: true
                   },
				   beforeSend: function() {
			
			//Esta función de devolución de llamada se activará antes de los datos se envían
						$.mobile.loading( "show", {
						text: "Cargando..",
						textVisible: "textVisible",
						theme: "a",
						})
						 },
			
			   //Esta función de devolución de llamada se activará antes de los datos se envía
                   data: {
                         FFIN:$(datepickerDe).val(),
                          FINI: $(datepickerHasta).val() ,
						  	   PUERTO: $(this).attr('puerto'),
							   NAVIERA: $(this).attr('naviera'),
							   
                          doAction: "LAYOUT.RESUMEN.PUERTO.NAVIERA.Table"
                           },
			   //funcion para recorer la tabla sacar el campo seleccionado
                       success: function(resp){ 
                        $('#tabla3').html(resp);
                         $('table3.responsive').responsiveTables();
                        $(window).trigger('rezise');
                    } ,
            complete : function(){
            $.mobile.loading( "hide" );
                }
        });
        });


</script>


<script type="text/javascript">
   /*
    Fecha              :    18/07/2015
	
    Elaborado por      :    Falcon Tzec Pablo Cesar 
	
	Parametros         :	Fecha inicial, Doaction, 
	
    Tipo de Retorno    :	Retorno de un html.
			
  	Descripcion        :    Funcion para realizar validar si esl usuario esta logueado
	 						o no si esta logueado marcar en las casillas 
	 						su usuario  en el caso que no redicreccionar al menu principal
    
   */
  
 //Capturamos el evento click sobre el boton con el id Eviar  
$(function(){
  //consulta Variables
  value = $.jStorage.get("login");
  value2 = $.jStorage.get("password");
  //si no existe debo mandar el usuario a la pagina de login
  		if("login"==null && "password"==null){
    		$.mobile.changePage("index.html");
    			//si existe Muestro al usuario
  			}else{
    		$("#username").html($.jStorage.get("login"));
    		$("#nameuser").html($.jStorage.get("login"));
  		}
});
  
  
  
$(document).on('click','#loguot',function() { //Capturamos el evento click sobre el boton con el id Eviar    

           $.ajax({ 
            type: "get", 
                  url: "http://estadistica.apiqroo.com.mx/apis/login/logout.php",
                    async        : true,
           xhrFields: {
                withCredentials: true
            },
                    crossDomain  : true,
      success: function(){
    $.mobile.loading( "hide" );
    $.mobile.changePage("index.html");
    $.jStorage.flush();
      localStorage.clear();
      value = $.jStorage.deleteKey("login");
  value2 = $.jStorage.deleteKey("password");
  
  
     
      }  
    });
       
 });  
   


</script>




<script type="text/javascript">
  
$( document ).on( "click", ".show-page-loading-msg", function() {
    var $this = $( this ),
        theme = $this.jqmData( "theme" ) || $.mobile.loader.prototype.options.theme,
        msgText = $this.jqmData( "msgtext" ) || $.mobile.loader.prototype.options.text,
        textVisible = $this.jqmData( "textvisible" ) || $.mobile.loader.prototype.options.textVisible,
        textonly = !!$this.jqmData( "textonly" );
        html = $this.jqmData( "html" ) || "";
    $.mobile.loading( "show", {
            text: msgText,
            textVisible: textVisible,
            theme: theme,
            textonly: textonly,
            html: html
    });
})
.on( "click", ".hide-page-loading-msg", function() {
    $.mobile.loading( "hide" );
});
 
</script>
</body>
</html>